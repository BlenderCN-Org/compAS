

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>brg.datastructures.volmesh.volmesh &mdash; brg_framework 0.1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../../../_static/css/theme_customize.css" type="text/css" />
  
    <link rel="top" title="brg_framework 0.1 documentation" href="../../../../index.html"/>
        <link rel="up" title="Module code" href="../../../index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../../../../index.html" class="fa fa-home"> brg_framework</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../pages/gettingstarted.html">Getting started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../pages/gettingstarted.html#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../pages/gettingstarted.html#download">Download</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../pages/gettingstarted.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../pages/gettingstarted.html#setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../pages/gettingstarted.html#first-steps">First steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pages/examples.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../pages/examples.html#architectural-geometry">Architectural Geometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../pages/examples.html#structural-design">Structural Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../pages/examples.html#robotic-fabrication">Robotic Fabrication</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pages/api.html">API reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../pages/api.html#brg">brg</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../pages/api.html#brg-rhino">brg_rhino</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pages/developers.html">Developers Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../pages/developers.html#how-to-contribute">How to contribute</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../pages/developers.html#coding-standards">Coding standards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../pages/developers.html#naming-conventions">Naming conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../pages/developers.html#packages-and-subpackages">Packages and Subpackages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../pages/developers.html#templates-and-snippets">Templates and Snippets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../pages/developers.html#documentation">Documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pages/license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pages/biblio.html">Bibliography</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../pages/biblio.html#references">References</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../pages/biblio.html#further-reading">Further reading</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../index.html">brg_framework</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../../index.html">Module code</a> &raquo;</li>
      
    <li>brg.datastructures.volmesh.volmesh</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <h1>Source code for brg.datastructures.volmesh.volmesh</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;This module defines the base class for cellular meshes.</span>

<span class="sd">The implementation of the base class is based on the notion of *x-maps* [xmaps]_</span>
<span class="sd">and the concepts behind the *OpenVolumeMesh* library [ovm]_. In short, we add an</span>
<span class="sd">additional entity compared to polygonal meshes, the *cell*, and relate cells not</span>
<span class="sd">through *half-edges*, but *half-planes*.</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span>

<span class="kn">from</span> <span class="nn">brg.datastructures.mesh.mesh</span> <span class="kn">import</span> <span class="n">Mesh</span>
<span class="kn">from</span> <span class="nn">brg.datastructures.volmesh.exceptions</span> <span class="kn">import</span> <span class="n">VolMeshError</span>

<span class="kn">from</span> <span class="nn">brg.geometry</span> <span class="kn">import</span> <span class="n">centroid</span>


<span class="n">__author__</span>     <span class="o">=</span> <span class="s1">&#39;Tom Van Mele&#39;</span>
<span class="n">__copyright__</span>  <span class="o">=</span> <span class="s1">&#39;Copyright 2014, Block Research Group - ETH Zurich&#39;</span>
<span class="n">__license__</span>    <span class="o">=</span> <span class="s1">&#39;MIT License&#39;</span>
<span class="n">__email__</span>      <span class="o">=</span> <span class="s1">&#39;&lt;vanmelet@ethz.ch&gt;&#39;</span>


<span class="k">def</span> <span class="nf">center_of_mass</span><span class="p">(</span><span class="n">edges</span><span class="p">,</span> <span class="n">sqrt</span><span class="o">=</span><span class="n">sqrt</span><span class="p">):</span>
    <span class="n">L</span>  <span class="o">=</span> <span class="mi">0</span>
    <span class="n">cx</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">cy</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">cz</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">sp</span><span class="p">,</span> <span class="n">ep</span> <span class="ow">in</span> <span class="n">edges</span><span class="p">:</span>
        <span class="n">l</span>   <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="nb">sum</span><span class="p">((</span><span class="n">sp</span><span class="p">[</span><span class="n">axis</span><span class="p">]</span> <span class="o">-</span> <span class="n">ep</span><span class="p">[</span><span class="n">axis</span><span class="p">])</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">axis</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)))</span>
        <span class="n">cx</span> <span class="o">+=</span> <span class="n">l</span> <span class="o">*</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">sp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">ep</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">cy</span> <span class="o">+=</span> <span class="n">l</span> <span class="o">*</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">sp</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">ep</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">cz</span> <span class="o">+=</span> <span class="n">l</span> <span class="o">*</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">sp</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">ep</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">L</span>  <span class="o">+=</span> <span class="n">l</span>
    <span class="n">cx</span> <span class="o">=</span> <span class="n">cx</span> <span class="o">/</span> <span class="n">L</span>
    <span class="n">cy</span> <span class="o">=</span> <span class="n">cy</span> <span class="o">/</span> <span class="n">L</span>
    <span class="n">cz</span> <span class="o">=</span> <span class="n">cz</span> <span class="o">/</span> <span class="n">L</span>
    <span class="k">return</span> <span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">,</span> <span class="n">cz</span>


<div class="viewcode-block" id="VolMesh"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh">[docs]</a><span class="k">class</span> <span class="nc">VolMesh</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>

    <span class="n">default_vertex_attributes</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attributes</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;name&#39;</span>                <span class="p">:</span> <span class="s1">&#39;VolMesh&#39;</span><span class="p">,</span>
            <span class="s1">&#39;color.vertex&#39;</span>        <span class="p">:</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span>
            <span class="s1">&#39;color.edge&#39;</span>          <span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="s1">&#39;color.face&#39;</span>          <span class="p">:</span> <span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">),</span>
            <span class="s1">&#39;color.normal:vertex&#39;</span> <span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="s1">&#39;color.normal:face&#39;</span>   <span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vertex</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plane</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">halfface</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cell</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">edge</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vkey</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fkey</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ckey</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># --------------------------------------------------------------------------</span>
    <span class="c1"># descriptors</span>
    <span class="c1"># --------------------------------------------------------------------------</span>

<div class="viewcode-block" id="VolMesh.__contains__"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.__contains__">[docs]</a>    <span class="k">def</span> <span class="nf">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertex</span>
</div>
<div class="viewcode-block" id="VolMesh.__len__"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.__len__">[docs]</a>    <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vertex</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="VolMesh.__iter__"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.__iter__">[docs]</a>    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vertex</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="VolMesh.__getitem__"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.__getitem__">[docs]</a>    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertex</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</div>
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="k">print</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The name of the mesh.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

    <span class="nd">@name.setter</span>
<div class="viewcode-block" id="VolMesh.name"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.name">[docs]</a>    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">color</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="p">(</span><span class="n">key</span><span class="p">[</span><span class="mi">6</span><span class="p">:],</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes</span> <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;color.&#39;</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="nd">@color.setter</span>
<div class="viewcode-block" id="VolMesh.color"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.color">[docs]</a>    <span class="k">def</span> <span class="nf">color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s1">&#39;color.{0}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The data representing the mesh.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;attributes&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">attributes</span><span class="p">,</span>
            <span class="s1">&#39;vertex&#39;</span>    <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertex</span><span class="p">,</span>
            <span class="s1">&#39;plane&#39;</span>     <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">plane</span><span class="p">,</span>
            <span class="s1">&#39;halfface&#39;</span>  <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">halfface</span><span class="p">,</span>
            <span class="s1">&#39;cell&#39;</span>      <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell</span><span class="p">,</span>
            <span class="s1">&#39;edge&#39;</span>      <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge</span><span class="p">,</span>
            <span class="s1">&#39;_vkey&#39;</span>     <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vkey</span><span class="p">,</span>
            <span class="s1">&#39;_fkey&#39;</span>     <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fkey</span><span class="p">,</span>
            <span class="s1">&#39;_ckey&#39;</span>     <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ckey</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="nd">@data.setter</span>
<div class="viewcode-block" id="VolMesh.data"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.data">[docs]</a>    <span class="k">def</span> <span class="nf">data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">attributes</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;attributes&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="n">vertex</span>     <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vertex&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="n">plane</span>      <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;plane&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="n">halfface</span>   <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;halfface&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="n">cell</span>       <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cell&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="n">edge</span>       <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edge&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="n">_vkey</span>      <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;_vkey&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">or</span> <span class="mi">0</span>
        <span class="n">_fkey</span>      <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;_fkey&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">or</span> <span class="mi">0</span>
        <span class="n">_ckey</span>      <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;_ckey&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">or</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attributes</span> <span class="o">=</span> <span class="n">attributes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vertex</span>     <span class="o">=</span> <span class="n">vertex</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plane</span>      <span class="o">=</span> <span class="n">plane</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">halfface</span>   <span class="o">=</span> <span class="n">halfface</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cell</span>       <span class="o">=</span> <span class="n">cell</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">edge</span>       <span class="o">=</span> <span class="n">edge</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vkey</span>      <span class="o">=</span> <span class="n">_vkey</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fkey</span>      <span class="o">=</span> <span class="n">_fkey</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ckey</span>      <span class="o">=</span> <span class="n">_ckey</span>

    <span class="c1"># --------------------------------------------------------------------------</span>
    <span class="c1"># constructors</span>
    <span class="c1"># --------------------------------------------------------------------------</span>
</div>
    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="VolMesh.from_vertices_and_cells"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.from_vertices_and_cells">[docs]</a>    <span class="k">def</span> <span class="nf">from_vertices_and_cells</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">vertices</span><span class="p">,</span> <span class="n">cells</span><span class="p">):</span>
        <span class="n">mesh</span> <span class="o">=</span> <span class="n">cls</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="ow">in</span> <span class="n">vertices</span><span class="p">:</span>
            <span class="n">mesh</span><span class="o">.</span><span class="n">add_vertex</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="n">z</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">halffaces</span> <span class="ow">in</span> <span class="n">cells</span><span class="p">:</span>
            <span class="n">mesh</span><span class="o">.</span><span class="n">add_cell</span><span class="p">(</span><span class="n">halffaces</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mesh</span>
</div>
    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="VolMesh.from_vertices_and_edges"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.from_vertices_and_edges">[docs]</a>    <span class="k">def</span> <span class="nf">from_vertices_and_edges</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">vertices</span><span class="p">,</span> <span class="n">edges</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>
</div>
    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="VolMesh.from_data"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.from_data">[docs]</a>    <span class="k">def</span> <span class="nf">from_data</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="n">volmesh</span> <span class="o">=</span> <span class="n">cls</span><span class="p">()</span>
        <span class="n">volmesh</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">return</span> <span class="n">volmesh</span>
</div>
    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="VolMesh.from_json"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.from_json">[docs]</a>    <span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">filepath</span><span class="p">):</span>
        <span class="n">volmesh</span> <span class="o">=</span> <span class="n">cls</span><span class="p">()</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">volmesh</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">return</span> <span class="n">volmesh</span>
</div>
    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="VolMesh.from_obj"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.from_obj">[docs]</a>    <span class="k">def</span> <span class="nf">from_obj</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">filepath</span><span class="p">):</span>
        <span class="c1"># the obj should specify vertices and faces</span>
        <span class="c1"># and cells by grouping faces</span>
        <span class="c1"># note that the faces may or may not be halffaces</span>
        <span class="c1">#</span>
        <span class="c1"># waht about detecting cells?</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="c1"># --------------------------------------------------------------------------</span>
    <span class="c1"># special</span>
    <span class="c1"># --------------------------------------------------------------------------</span>
</div>
<div class="viewcode-block" id="VolMesh.dual"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.dual">[docs]</a>    <span class="k">def</span> <span class="nf">dual</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cls</span><span class="p">):</span>
        <span class="n">network</span> <span class="o">=</span> <span class="n">cls</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">ckey</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell_center</span><span class="p">(</span><span class="n">ckey</span><span class="p">)</span>
            <span class="n">network</span><span class="o">.</span><span class="n">add_vertex</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">ckey</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="n">z</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">nbr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell_neighbours</span><span class="p">(</span><span class="n">ckey</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">nbr</span> <span class="ow">in</span> <span class="n">network</span><span class="o">.</span><span class="n">edge</span><span class="p">[</span><span class="n">ckey</span><span class="p">]:</span>
                    <span class="k">continue</span>
                <span class="k">if</span> <span class="n">nbr</span> <span class="ow">in</span> <span class="n">network</span><span class="o">.</span><span class="n">edge</span> <span class="ow">and</span> <span class="n">ckey</span> <span class="ow">in</span> <span class="n">network</span><span class="o">.</span><span class="n">edge</span><span class="p">[</span><span class="n">nbr</span><span class="p">]:</span>
                    <span class="k">continue</span>
                <span class="n">network</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">ckey</span><span class="p">,</span> <span class="n">nbr</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">network</span>

    <span class="c1"># --------------------------------------------------------------------------</span>
    <span class="c1"># converters</span>
    <span class="c1"># --------------------------------------------------------------------------</span>
</div>
<div class="viewcode-block" id="VolMesh.to_data"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.to_data">[docs]</a>    <span class="k">def</span> <span class="nf">to_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
</div>
<div class="viewcode-block" id="VolMesh.to_json"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.to_json">[docs]</a>    <span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">):</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s1">&#39;wb+&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">fp</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="VolMesh.to_obj"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.to_obj">[docs]</a>    <span class="k">def</span> <span class="nf">to_obj</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="c1"># --------------------------------------------------------------------------</span>
    <span class="c1"># modifiers</span>
    <span class="c1"># --------------------------------------------------------------------------</span>

    <span class="c1"># vkey should be compatible with int</span>
    <span class="c1"># a mesh is a geometrical data structure</span>
    <span class="c1"># random keys do not make sense</span></div>
<div class="viewcode-block" id="VolMesh.add_vertex"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.add_vertex">[docs]</a>    <span class="k">def</span> <span class="nf">add_vertex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vkey</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">attr_dict</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwattr</span><span class="p">):</span>
        <span class="n">attr</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">attr_dict</span><span class="p">:</span>
            <span class="n">attr</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">attr_dict</span><span class="p">)</span>
        <span class="n">attr</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwattr</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">vkey</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">vkey</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vkey</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">vkey</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vkey</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_vkey</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">vkey</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vkey</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">vkey</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">vkey</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">vkey</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vertex</span><span class="p">[</span><span class="n">vkey</span><span class="p">]</span> <span class="o">=</span> <span class="n">attr</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plane</span><span class="p">[</span><span class="n">vkey</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">edge</span><span class="p">[</span><span class="n">vkey</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vertex</span><span class="p">[</span><span class="n">vkey</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">vkey</span>
</div>
<div class="viewcode-block" id="VolMesh.add_halfface"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.add_halfface">[docs]</a>    <span class="k">def</span> <span class="nf">add_halfface</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vertices</span><span class="p">,</span> <span class="n">fkey</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">vertices</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">vertices</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">vertices</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="n">vertices</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">vertices</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">VolMeshError</span><span class="p">(</span><span class="s1">&#39;Corrupt halfface.&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fkey</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">fkey</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fkey</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">fkey</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fkey</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_fkey</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">fkey</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fkey</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">fkey</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">fkey</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">halfface</span><span class="p">[</span><span class="n">fkey</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span> <span class="o">-</span> <span class="mi">2</span><span class="p">):</span>
            <span class="n">u</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">v</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">vertices</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
            <span class="n">w</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">vertices</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_vertex</span><span class="p">(</span><span class="n">vkey</span><span class="o">=</span><span class="n">u</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_vertex</span><span class="p">(</span><span class="n">vkey</span><span class="o">=</span><span class="n">v</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_vertex</span><span class="p">(</span><span class="n">vkey</span><span class="o">=</span><span class="n">w</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">halfface</span><span class="p">[</span><span class="n">fkey</span><span class="p">][</span><span class="n">u</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">halfface</span><span class="p">[</span><span class="n">fkey</span><span class="p">][</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="n">w</span>
            <span class="k">if</span> <span class="n">v</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plane</span><span class="p">[</span><span class="n">u</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plane</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plane</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="n">v</span><span class="p">][</span><span class="n">w</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">if</span> <span class="n">v</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plane</span><span class="p">[</span><span class="n">w</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plane</span><span class="p">[</span><span class="n">w</span><span class="p">][</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="n">u</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plane</span><span class="p">[</span><span class="n">w</span><span class="p">][</span><span class="n">v</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plane</span><span class="p">[</span><span class="n">w</span><span class="p">][</span><span class="n">v</span><span class="p">][</span><span class="n">u</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">if</span> <span class="n">v</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge</span><span class="p">[</span><span class="n">u</span><span class="p">]</span> <span class="ow">and</span> <span class="n">u</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge</span><span class="p">[</span><span class="n">v</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">edge</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="n">w</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="ow">and</span> <span class="n">v</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge</span><span class="p">[</span><span class="n">w</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">edge</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="n">w</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">u</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">vertices</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">v</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">vertices</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">v</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge</span><span class="p">[</span><span class="n">u</span><span class="p">]</span> <span class="ow">and</span> <span class="n">u</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge</span><span class="p">[</span><span class="n">v</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">edge</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="n">fkey</span>
</div>
<div class="viewcode-block" id="VolMesh.add_cell"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.add_cell">[docs]</a>    <span class="k">def</span> <span class="nf">add_cell</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">halffaces</span><span class="p">,</span> <span class="n">ckey</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ckey</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">ckey</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ckey</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">ckey</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ckey</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_ckey</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ckey</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ckey</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">ckey</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">ckey</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cell</span><span class="p">[</span><span class="n">ckey</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">vertices</span> <span class="ow">in</span> <span class="n">halffaces</span><span class="p">:</span>
            <span class="n">fkey</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_halfface</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">halfface</span><span class="p">[</span><span class="n">fkey</span><span class="p">]:</span>
                <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">halfface</span><span class="p">[</span><span class="n">fkey</span><span class="p">][</span><span class="n">u</span><span class="p">]</span>
                <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">halfface</span><span class="p">[</span><span class="n">fkey</span><span class="p">][</span><span class="n">v</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">u</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell</span><span class="p">[</span><span class="n">ckey</span><span class="p">]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">cell</span><span class="p">[</span><span class="n">ckey</span><span class="p">][</span><span class="n">u</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cell</span><span class="p">[</span><span class="n">ckey</span><span class="p">][</span><span class="n">u</span><span class="p">][</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="n">fkey</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plane</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="n">v</span><span class="p">][</span><span class="n">w</span><span class="p">]</span> <span class="o">=</span> <span class="n">ckey</span>
        <span class="k">return</span> <span class="n">ckey</span>

    <span class="c1"># --------------------------------------------------------------------------</span>
    <span class="c1"># lists and iterators</span>
    <span class="c1"># --------------------------------------------------------------------------</span>
</div>
<div class="viewcode-block" id="VolMesh.vertices"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.vertices">[docs]</a>    <span class="k">def</span> <span class="nf">vertices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vertices_iter</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="VolMesh.vertices_iter"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.vertices_iter">[docs]</a>    <span class="k">def</span> <span class="nf">vertices_iter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertex</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertex</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">key</span>
</div>
<div class="viewcode-block" id="VolMesh.vertices_enum"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.vertices_enum">[docs]</a>    <span class="k">def</span> <span class="nf">vertices_enum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vertices_iter</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="VolMesh.cells"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.cells">[docs]</a>    <span class="k">def</span> <span class="nf">cells</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cells_iter</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="VolMesh.cells_iter"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.cells_iter">[docs]</a>    <span class="k">def</span> <span class="nf">cells_iter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">ckey</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span>
                <span class="c1"># data should be stored on the dual network</span>
                <span class="c1"># yield ckey, self.cell[ckey]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">ckey</span>
</div>
<div class="viewcode-block" id="VolMesh.cells_enum"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.cells_enum">[docs]</a>    <span class="k">def</span> <span class="nf">cells_enum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cells_iter</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="VolMesh.planes"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.planes">[docs]</a>    <span class="k">def</span> <span class="nf">planes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>
</div>
<div class="viewcode-block" id="VolMesh.planes_iter"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.planes_iter">[docs]</a>    <span class="k">def</span> <span class="nf">planes_iter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>
</div>
<div class="viewcode-block" id="VolMesh.edges"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.edges">[docs]</a>    <span class="k">def</span> <span class="nf">edges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">edges_iter</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="VolMesh.edges_iter"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.edges_iter">[docs]</a>    <span class="k">def</span> <span class="nf">edges_iter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge</span><span class="p">[</span><span class="n">u</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="n">v</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span>
</div>
<div class="viewcode-block" id="VolMesh.edges_enum"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.edges_enum">[docs]</a>    <span class="k">def</span> <span class="nf">edges_enum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">edges_iter</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">))</span>

    <span class="c1"># --------------------------------------------------------------------------</span>
    <span class="c1"># special purpose</span>
    <span class="c1"># --------------------------------------------------------------------------</span>
</div>
<div class="viewcode-block" id="VolMesh.faces"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.faces">[docs]</a>    <span class="k">def</span> <span class="nf">faces</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">faces</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">seen</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">ckey</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">fkey</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell_halffaces</span><span class="p">(</span><span class="n">ckey</span><span class="p">):</span>
                <span class="n">vertices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">halfface_vertices</span><span class="p">(</span><span class="n">fkey</span><span class="p">,</span> <span class="n">ordered</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="n">vset</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">vset</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen</span><span class="p">:</span>
                    <span class="n">faces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span>
                <span class="n">seen</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">vset</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">faces</span>

    <span class="c1"># --------------------------------------------------------------------------</span>
    <span class="c1"># topology</span>
    <span class="c1"># --------------------------------------------------------------------------</span>
</div>
<div class="viewcode-block" id="VolMesh.vertex_neighbours"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.vertex_neighbours">[docs]</a>    <span class="k">def</span> <span class="nf">vertex_neighbours</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vkey</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">plane</span><span class="p">[</span><span class="n">vkey</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="VolMesh.cell_neighbours"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.cell_neighbours">[docs]</a>    <span class="k">def</span> <span class="nf">cell_neighbours</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ckey</span><span class="p">):</span>
        <span class="n">nbrs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">fkey</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell_halffaces</span><span class="p">(</span><span class="n">ckey</span><span class="p">):</span>
            <span class="n">u</span>   <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">halfface</span><span class="p">[</span><span class="n">fkey</span><span class="p">]</span><span class="o">.</span><span class="n">iterkeys</span><span class="p">()</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
            <span class="n">v</span>   <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">halfface</span><span class="p">[</span><span class="n">fkey</span><span class="p">][</span><span class="n">u</span><span class="p">]</span>
            <span class="n">w</span>   <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">halfface</span><span class="p">[</span><span class="n">fkey</span><span class="p">][</span><span class="n">v</span><span class="p">]</span>
            <span class="n">nbr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plane</span><span class="p">[</span><span class="n">w</span><span class="p">][</span><span class="n">v</span><span class="p">][</span><span class="n">u</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">nbr</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">nbrs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nbr</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">nbrs</span>
</div>
<div class="viewcode-block" id="VolMesh.cell_vertex_neighbours"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.cell_vertex_neighbours">[docs]</a>    <span class="k">def</span> <span class="nf">cell_vertex_neighbours</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ckey</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>
</div>
<div class="viewcode-block" id="VolMesh.halfface_cell"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.halfface_cell">[docs]</a>    <span class="k">def</span> <span class="nf">halfface_cell</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fkey</span><span class="p">):</span>
        <span class="n">u</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">halfface</span><span class="p">[</span><span class="n">fkey</span><span class="p">]</span><span class="o">.</span><span class="n">iterkeys</span><span class="p">()</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
        <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">halfface</span><span class="p">[</span><span class="n">fkey</span><span class="p">][</span><span class="n">u</span><span class="p">]</span>
        <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">halfface</span><span class="p">[</span><span class="n">fkey</span><span class="p">][</span><span class="n">v</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">plane</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="n">v</span><span class="p">][</span><span class="n">w</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="VolMesh.halfface_vertices"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.halfface_vertices">[docs]</a>    <span class="k">def</span> <span class="nf">halfface_vertices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fkey</span><span class="p">,</span> <span class="n">ordered</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ordered</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">halfface</span><span class="p">[</span><span class="n">fkey</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="n">u</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">halfface</span><span class="p">[</span><span class="n">fkey</span><span class="p">]</span><span class="o">.</span><span class="n">iterkeys</span><span class="p">()</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
        <span class="n">vertices</span> <span class="o">=</span> <span class="p">[</span><span class="n">u</span><span class="p">]</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">u</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">halfface</span><span class="p">[</span><span class="n">fkey</span><span class="p">][</span><span class="n">u</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">u</span> <span class="o">==</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="k">break</span>
            <span class="n">vertices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">vertices</span>
</div>
<div class="viewcode-block" id="VolMesh.halfface_edges"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.halfface_edges">[docs]</a>    <span class="k">def</span> <span class="nf">halfface_edges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fkey</span><span class="p">):</span>
        <span class="n">vertices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">halfface_vertices</span><span class="p">(</span><span class="n">fkey</span><span class="p">,</span> <span class="n">ordered</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">edges</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">edges</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">vertices</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">edges</span>
</div>
<div class="viewcode-block" id="VolMesh.halfface_adjacency"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.halfface_adjacency">[docs]</a>    <span class="k">def</span> <span class="nf">halfface_adjacency</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ckey</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>
</div>
<div class="viewcode-block" id="VolMesh.cell_halffaces"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.cell_halffaces">[docs]</a>    <span class="k">def</span> <span class="nf">cell_halffaces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ckey</span><span class="p">):</span>
        <span class="n">halffaces</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell</span><span class="p">[</span><span class="n">ckey</span><span class="p">]:</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell</span><span class="p">[</span><span class="n">ckey</span><span class="p">][</span><span class="n">u</span><span class="p">]:</span>
                <span class="n">fkey</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell</span><span class="p">[</span><span class="n">ckey</span><span class="p">][</span><span class="n">u</span><span class="p">][</span><span class="n">v</span><span class="p">]</span>
                <span class="n">halffaces</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">fkey</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">halffaces</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="VolMesh.cell_vertices"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.cell_vertices">[docs]</a>    <span class="k">def</span> <span class="nf">cell_vertices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ckey</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">([</span><span class="n">vkey</span> <span class="k">for</span> <span class="n">fkey</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell_halffaces</span><span class="p">(</span><span class="n">ckey</span><span class="p">)</span> <span class="k">for</span> <span class="n">vkey</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">halfface_vertices</span><span class="p">(</span><span class="n">fkey</span><span class="p">)]))</span>
</div>
<div class="viewcode-block" id="VolMesh.cell_edges"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.cell_edges">[docs]</a>    <span class="k">def</span> <span class="nf">cell_edges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ckey</span><span class="p">):</span>
        <span class="n">halfedges</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">fkey</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell_halffaces</span><span class="p">(</span><span class="n">ckey</span><span class="p">):</span>
            <span class="n">halfedges</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">halfface_edges</span><span class="p">(</span><span class="n">fkey</span><span class="p">)</span>
        <span class="n">edges</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">uv</span><span class="p">)</span> <span class="k">for</span> <span class="n">uv</span> <span class="ow">in</span> <span class="n">halfedges</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">map</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="n">edges</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="VolMesh.cell_vertices_and_halffaces"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.cell_vertices_and_halffaces">[docs]</a>    <span class="k">def</span> <span class="nf">cell_vertices_and_halffaces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ckey</span><span class="p">):</span>
        <span class="n">vkeys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell_vertices</span><span class="p">(</span><span class="n">ckey</span><span class="p">)</span>
        <span class="n">fkeys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell_halffaces</span><span class="p">(</span><span class="n">ckey</span><span class="p">)</span>
        <span class="n">vkey_vindex</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">((</span><span class="n">vkey</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">vkey</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">vkeys</span><span class="p">))</span>
        <span class="n">vertices</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">vertex_coordinates</span><span class="p">(</span><span class="n">vkey</span><span class="p">)</span> <span class="k">for</span> <span class="n">vkey</span> <span class="ow">in</span> <span class="n">vkeys</span><span class="p">]</span>
        <span class="n">halffaces</span> <span class="o">=</span> <span class="p">[[</span><span class="n">vkey_vindex</span><span class="p">[</span><span class="n">vkey</span><span class="p">]</span> <span class="k">for</span> <span class="n">vkey</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">halfface_vertices</span><span class="p">(</span><span class="n">fkey</span><span class="p">,</span> <span class="n">ordered</span><span class="o">=</span><span class="bp">True</span><span class="p">)]</span> <span class="k">for</span> <span class="n">fkey</span> <span class="ow">in</span> <span class="n">fkeys</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">vertices</span><span class="p">,</span> <span class="n">halffaces</span>
</div>
<div class="viewcode-block" id="VolMesh.cell_adjacency"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.cell_adjacency">[docs]</a>    <span class="k">def</span> <span class="nf">cell_adjacency</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>
        <span class="c1"># adjacency = {}</span>
        <span class="c1"># for fkey in self.cell_faces(ckey):</span>
        <span class="c1">#     neighbours = []</span>
        <span class="c1">#     for u, v in self.face[fkey].iteritems():</span>
        <span class="c1">#         for test in self.face:</span>
        <span class="c1">#             if test == fkey:</span>
        <span class="c1">#                 continue</span>
        <span class="c1">#             if u in self.face[test]:</span>
        <span class="c1">#                 if v == self.face[test][u]:</span>
        <span class="c1">#                     neighbours.append(test)</span>
        <span class="c1">#                     break</span>
        <span class="c1">#             if v in self.face[test]:</span>
        <span class="c1">#                 if u == self.face[test][v]:</span>
        <span class="c1">#                     neighbours.append(test)</span>
        <span class="c1">#                     break</span>
        <span class="c1">#     adjacency[fkey] = neighbours</span>
        <span class="c1"># return adjacency</span>
</div>
<div class="viewcode-block" id="VolMesh.cell_tree"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.cell_tree">[docs]</a>    <span class="k">def</span> <span class="nf">cell_tree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>
</div>
<div class="viewcode-block" id="VolMesh.cell_mesh"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.cell_mesh">[docs]</a>    <span class="k">def</span> <span class="nf">cell_mesh</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ckey</span><span class="p">):</span>
        <span class="n">vertices</span><span class="p">,</span> <span class="n">halffaces</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell_vertices_and_halffaces</span><span class="p">(</span><span class="n">ckey</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Mesh</span><span class="o">.</span><span class="n">from_vertices_and_faces</span><span class="p">(</span><span class="n">vertices</span><span class="p">,</span> <span class="n">halffaces</span><span class="p">)</span>

    <span class="c1"># --------------------------------------------------------------------------</span>
    <span class="c1"># geometry</span>
    <span class="c1"># --------------------------------------------------------------------------</span>
</div>
<div class="viewcode-block" id="VolMesh.vertex_coordinates"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.vertex_coordinates">[docs]</a>    <span class="k">def</span> <span class="nf">vertex_coordinates</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vkey</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="s1">&#39;xyz&#39;</span><span class="p">):</span>
        <span class="n">attr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertex</span><span class="p">[</span><span class="n">vkey</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">attr</span><span class="p">[</span><span class="n">axis</span><span class="p">]</span> <span class="k">for</span> <span class="n">axis</span> <span class="ow">in</span> <span class="n">axes</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="VolMesh.edge_coordinates"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.edge_coordinates">[docs]</a>    <span class="k">def</span> <span class="nf">edge_coordinates</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="s1">&#39;xyz&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertex_coordinates</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="n">axes</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertex_coordinates</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="n">axes</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="VolMesh.face_coordinates"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.face_coordinates">[docs]</a>    <span class="k">def</span> <span class="nf">face_coordinates</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fkey</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="s1">&#39;xyz&#39;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>
</div>
<div class="viewcode-block" id="VolMesh.cell_centroid"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.cell_centroid">[docs]</a>    <span class="k">def</span> <span class="nf">cell_centroid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ckey</span><span class="p">):</span>
        <span class="n">vkeys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell_vertices</span><span class="p">(</span><span class="n">ckey</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">centroid</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">vertex_coordinates</span><span class="p">(</span><span class="n">vkey</span><span class="p">)</span> <span class="k">for</span> <span class="n">vkey</span> <span class="ow">in</span> <span class="n">vkeys</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="VolMesh.cell_center"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.cell_center">[docs]</a>    <span class="k">def</span> <span class="nf">cell_center</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ckey</span><span class="p">):</span>
        <span class="n">edges</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cell_edges</span><span class="p">(</span><span class="n">ckey</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">center_of_mass</span><span class="p">([(</span><span class="bp">self</span><span class="o">.</span><span class="n">vertex_coordinates</span><span class="p">(</span><span class="n">u</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertex_coordinates</span><span class="p">(</span><span class="n">v</span><span class="p">))</span> <span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">edges</span><span class="p">])</span>

    <span class="c1"># --------------------------------------------------------------------------</span>
    <span class="c1"># geometric operations</span>
    <span class="c1"># --------------------------------------------------------------------------</span>
</div>
<div class="viewcode-block" id="VolMesh.scale"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.scale">[docs]</a>    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">factor</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertex</span><span class="p">:</span>
            <span class="n">attr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertex</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="n">attr</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">*=</span> <span class="n">factor</span>
            <span class="n">attr</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">*=</span> <span class="n">factor</span>
            <span class="n">attr</span><span class="p">[</span><span class="s1">&#39;z&#39;</span><span class="p">]</span> <span class="o">*=</span> <span class="n">factor</span>

    <span class="c1"># --------------------------------------------------------------------------</span>
    <span class="c1"># attributes</span>
    <span class="c1"># --------------------------------------------------------------------------</span>
</div>
<div class="viewcode-block" id="VolMesh.set_vertex_attributes"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.set_vertex_attributes">[docs]</a>    <span class="k">def</span> <span class="nf">set_vertex_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vkey</span><span class="p">,</span> <span class="n">attr_dict</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">attr</span> <span class="o">=</span> <span class="n">attr_dict</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="n">attr</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vertex</span><span class="p">[</span><span class="n">vkey</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="VolMesh.get_vertex_attributes"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.get_vertex_attributes">[docs]</a>    <span class="k">def</span> <span class="nf">get_vertex_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vkey</span><span class="p">,</span> <span class="n">attr_dict</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">attr</span> <span class="o">=</span> <span class="n">attr_dict</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="n">attr</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">attr</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertex</span><span class="p">[</span><span class="n">vkey</span><span class="p">]</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">attr</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">data</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertex</span><span class="p">[</span><span class="n">vkey</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span>
</div>
<div class="viewcode-block" id="VolMesh.set_edge_attributes"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.set_edge_attributes">[docs]</a>    <span class="k">def</span> <span class="nf">set_edge_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">attr_dict</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">attr</span> <span class="o">=</span> <span class="n">attr_dict</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="n">attr</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">edge</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="n">v</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="VolMesh.get_edge_attributes"><a class="viewcode-back" href="../../../../pages/api/brg-datastructures-volmesh-volmesh-VolMesh.html#brg.datastructures.volmesh.volmesh.VolMesh.get_edge_attributes">[docs]</a>    <span class="k">def</span> <span class="nf">get_edge_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">attr_dict</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">attr</span> <span class="o">=</span> <span class="n">attr_dict</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="n">attr</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">attr</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="n">v</span><span class="p">]</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">attr</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">data</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="n">v</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Debugging</span>
<span class="c1"># ==============================================================================</span>
</div></div>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>

    <span class="c1">#         18------19</span>
    <span class="c1">#       16------17|</span>
    <span class="c1">#        |      | |</span>
    <span class="c1">#   5----|-4----|-11-----15</span>
    <span class="c1"># 6------7------10-----14|</span>
    <span class="c1"># | |    | |    | |    | |</span>
    <span class="c1"># | 3----|-2----|-9----|-13</span>
    <span class="c1"># 0------1------8------12</span>

    <span class="kn">import</span> <span class="nn">brg</span>
    <span class="kn">from</span> <span class="nn">viewer</span> <span class="kn">import</span> <span class="n">VolMeshViewer</span>
    <span class="c1"># from brg.viewers import NetworkViewer</span>

    <span class="c1"># c1 = [[0, 3, 2, 1],</span>
    <span class="c1">#       [0, 1, 7, 6],</span>
    <span class="c1">#       [0, 6, 5, 3],</span>
    <span class="c1">#       [4, 2, 3, 5],</span>
    <span class="c1">#       [4, 7, 1, 2],</span>
    <span class="c1">#       [4, 5, 6, 7]]</span>
    <span class="c1"># c2 = [[2, 1, 7, 4],</span>
    <span class="c1">#       [2, 9, 8, 1],</span>
    <span class="c1">#       [8, 9, 11, 10],</span>
    <span class="c1">#       [4, 7, 10, 11],</span>
    <span class="c1">#       [7, 1, 8, 10],</span>
    <span class="c1">#       [4, 11, 9, 2]]</span>
    <span class="c1"># c3 = [[10, 11, 9, 8],</span>
    <span class="c1">#       [9, 13, 12, 8],</span>
    <span class="c1">#       [12, 13, 15, 14],</span>
    <span class="c1">#       [10, 14, 15, 11],</span>
    <span class="c1">#       [10, 8, 12, 14],</span>
    <span class="c1">#       [11, 15, 13, 9]]</span>
    <span class="c1"># c4 = [[16, 17, 19, 18],</span>
    <span class="c1">#       [4, 18, 19, 11],</span>
    <span class="c1">#       [16, 7, 10, 17],</span>
    <span class="c1">#       [16, 18, 4, 7],</span>
    <span class="c1">#       [19, 17, 10, 11],</span>
    <span class="c1">#       [4, 11, 10, 7]]</span>

    <span class="c1"># vertices = [[0, 0, 0],</span>
    <span class="c1">#             [1, 0, 0],</span>
    <span class="c1">#             [1, 1, 0],</span>
    <span class="c1">#             [0, 1, 0],</span>
    <span class="c1">#             [1, 1, 1],</span>
    <span class="c1">#             [0, 1, 1],</span>
    <span class="c1">#             [0, 0, 1],</span>
    <span class="c1">#             [1, 0, 1],</span>
    <span class="c1">#             [2, 0, 0],</span>
    <span class="c1">#             [2, 1, 0],</span>
    <span class="c1">#             [2, 0, 1],</span>
    <span class="c1">#             [2, 1, b1],</span>
    <span class="c1">#             [3, 0, 0],</span>
    <span class="c1">#             [3, 1, 0],</span>
    <span class="c1">#             [3, 0, 1],</span>
    <span class="c1">#             [3, 1, 1],</span>
    <span class="c1">#             [1, 0, 2],</span>
    <span class="c1">#             [2, 0, 2],</span>
    <span class="c1">#             [1, 1, 2],</span>
    <span class="c1">#             [2, 1, 2]]</span>

    <span class="c1"># cells = [c1, c2, c3, c4]</span>

    <span class="c1"># mesh = VolMesh.from_vertices_and_cells(vertices, cells)</span>

    <span class="c1"># print mesh.edges()</span>
    <span class="c1"># print len(mesh.edges())</span>

    <span class="c1"># print mesh.vertex_neighbours(&#39;10&#39;)</span>
    <span class="c1"># print mesh.cell_neighbours(&#39;0&#39;)</span>
    <span class="c1"># print mesh.cell_vertices(&#39;0&#39;)</span>

    <span class="c1"># for fkey in mesh.cell_halffaces(&#39;0&#39;):</span>
    <span class="c1">#     print mesh.halfface_vertices(fkey, True)</span>

    <span class="c1"># for ckey in mesh.cell:</span>
    <span class="c1">#     cell = mesh.cell_mesh(ckey)</span>
    <span class="c1">#     print cell</span>

    <span class="n">mesh</span> <span class="o">=</span> <span class="n">VolMesh</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">brg</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="s1">&#39;boxes.json&#39;</span><span class="p">))</span>

    <span class="k">print</span> <span class="n">mesh</span><span class="o">.</span><span class="n">name</span>

    <span class="n">mesh</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

    <span class="n">viewer</span> <span class="o">=</span> <span class="n">VolMeshViewer</span><span class="p">(</span><span class="n">mesh</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="n">grid_on</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mf">5.</span><span class="p">)</span>
    <span class="n">viewer</span><span class="o">.</span><span class="n">setup</span><span class="p">()</span>
    <span class="n">viewer</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="c1"># dual = mesh.dual()</span>

    <span class="c1"># viewer = NetworkViewer(dual, 600, 600)</span>
    <span class="c1"># viewer.grid_on = True</span>
    <span class="c1"># viewer.setup()</span>
    <span class="c1"># viewer.show()</span>
</pre></div>

          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Block Research Group - ETH Zurich.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>